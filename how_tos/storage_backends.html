<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>How to Use Different Storage Backends for Time Series Data - Infrastructure Systems Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Infrastructure Systems Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">Infrastructure Systems Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="index.html">How Tos</a><input aria-label="Toggle navigation of How Tos" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="list_time_series.html">How to list existing time series data</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input aria-label="Toggle navigation of Tutorials" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/custom_system.html">Custom System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/benchmark.html">How to Benchmark Different Python Implementations with <code class="docutils literal notranslate"><span class="pre">pytest-benchmark</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/benchmark.html#id1">How to Benchmark Different Python Implementations with <code class="docutils literal notranslate"><span class="pre">pytest-benchmark</span></code>.</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input aria-label="Toggle navigation of Reference" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/api/index.html">API</a><input aria-label="Toggle navigation of API" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/system.html">System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/components.html">Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/time_series.html">Time Series</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/location.html">Location</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/quantities.html">Quantities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/api/function_data.html">Function data</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/system_json.html">Viewing System Data in JSON Format</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../explanation/index.html">Explanation</a><input aria-label="Toggle navigation of Explanation" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../explanation/system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/components.html">Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/time_series.html">Time Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/location.html">Location</a></li>
<li class="toctree-l2"><a class="reference internal" href="../explanation/serialization.html">Serialization</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/how_tos/storage_backends.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="how-to-use-different-storage-backends-for-time-series-data">
<h1>How to Use Different Storage Backends for Time Series Data<a class="headerlink" href="#how-to-use-different-storage-backends-for-time-series-data" title="Link to this heading">¶</a></h1>
<p>This guide explains how to use the different storage backends available in Infrasys for time series data. The backend you choose affects how time series data is stored and accessed throughout the system lifecycle.</p>
<section id="available-storage-backends">
<h2>Available Storage Backends<a class="headerlink" href="#available-storage-backends" title="Link to this heading">¶</a></h2>
<p>Infrasys offers four different storage backends:</p>
<ol class="arabic simple">
<li><p><strong>In-Memory Storage</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">InMemoryTimeSeriesStorage</span></code>): Stores time series data entirely in memory</p></li>
<li><p><strong>Arrow Storage</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrowTimeSeriesStorage</span></code>): Stores time series data in Apache Arrow files on disk</p></li>
<li><p><strong>Chronify Storage</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ChronifyTimeSeriesStorage</span></code>): Stores time series data in a SQL database using the Chronify library</p></li>
<li><p><strong>HDF5 Storage</strong> (<code class="docutils literal notranslate"><span class="pre">HDF5TimeSeriesStorage</span></code>): Stores time series data in HDF5 files (available in development version)</p></li>
</ol>
</section>
<section id="choosing-a-storage-backend">
<h2>Choosing a Storage Backend<a class="headerlink" href="#choosing-a-storage-backend" title="Link to this heading">¶</a></h2>
<p>You can choose the storage backend when creating a <a class="reference internal" href="../reference/api/system.html#infrasys.system.System" title="infrasys.system.System"><code class="xref py py-class docutils literal notranslate"><span class="pre">System</span></code></a> by setting the <code class="docutils literal notranslate"><span class="pre">time_series_storage_type</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">infrasys</span><span class="w"> </span><span class="kn">import</span> <span class="n">System</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys.time_series_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeriesStorageType</span>

<span class="c1"># Create a system with in-memory storage</span>
<span class="n">system_memory</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">)</span>

<span class="c1"># Create a system with Arrow storage (default)</span>
<span class="n">system_arrow</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">)</span>

<span class="c1"># Create a system with Chronify storage</span>
<span class="n">system_chronify</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">CHRONIFY</span><span class="p">)</span>

<span class="c1"># Create a system with HDF5 storage (development version)</span>
<span class="n">system_hdf5</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">HDF5</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t specify a storage type, Arrow storage is used by default.</p>
</div>
</section>
<section id="storage-directory-configuration">
<h2>Storage Directory Configuration<a class="headerlink" href="#storage-directory-configuration" title="Link to this heading">¶</a></h2>
<p>For file-based storage backends (Arrow and Chronify), you can specify where the time series data will be stored:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys</span><span class="w"> </span><span class="kn">import</span> <span class="n">System</span>

<span class="c1"># Use a specific directory for time series data</span>
<span class="n">custom_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;/path/to/your/storage/directory&quot;</span><span class="p">)</span>
<span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_directory</span><span class="o">=</span><span class="n">custom_dir</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If <code class="docutils literal notranslate"><span class="pre">time_series_directory</span></code> is not specified, a temporary directory will be created automatically. This directory will be cleaned up when the Python process exits.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If your time series data is in the range of GBs, you may need to specify an alternate location because the tmp filesystem may be too small.</p>
</div>
</section>
<section id="converting-between-storage-types">
<h2>Converting Between Storage Types<a class="headerlink" href="#converting-between-storage-types" title="Link to this heading">¶</a></h2>
<p>You can convert between storage types during runtime using the <code class="docutils literal notranslate"><span class="pre">convert_storage</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">infrasys.time_series_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeriesStorageType</span>

<span class="c1"># Convert from in-memory to Arrow storage</span>
<span class="n">system</span><span class="o">.</span><span class="n">convert_storage</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">)</span>

<span class="c1"># Convert from Arrow to Chronify storage</span>
<span class="n">system</span><span class="o">.</span><span class="n">convert_storage</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">CHRONIFY</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s a complete example of converting storage backends:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys.time_series_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeriesStorageType</span><span class="p">,</span> <span class="n">SingleTimeSeries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys</span><span class="w"> </span><span class="kn">import</span> <span class="n">System</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tests.models.simple_system</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleSystem</span><span class="p">,</span> <span class="n">SimpleBus</span><span class="p">,</span> <span class="n">SimpleGenerator</span>

<span class="c1"># Create a system with in-memory storage</span>
<span class="n">system</span> <span class="o">=</span> <span class="n">SimpleSystem</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">)</span>

<span class="c1"># Add components</span>
<span class="n">bus</span> <span class="o">=</span> <span class="n">SimpleBus</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test-bus&quot;</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">SimpleGenerator</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;gen&quot;</span><span class="p">,</span> <span class="n">active_power</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">rating</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">bus</span><span class="o">=</span><span class="n">bus</span><span class="p">,</span> <span class="n">available</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">add_components</span><span class="p">(</span><span class="n">bus</span><span class="p">,</span> <span class="n">generator</span><span class="p">)</span>

<span class="c1"># Create and add time series data</span>
<span class="n">ts_data</span> <span class="o">=</span> <span class="n">SingleTimeSeries</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;active_power&quot;</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
    <span class="n">initial_timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">add_time_series</span><span class="p">(</span><span class="n">ts_data</span><span class="p">,</span> <span class="n">generator</span><span class="p">,</span> <span class="n">scenario</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span><span class="p">)</span>

<span class="c1"># Verify storage type</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current storage type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_time_series_mgr</span><span class="o">.</span><span class="n">_storage</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: Current storage type: InMemoryTimeSeriesStorage</span>

<span class="c1"># Convert to Arrow storage</span>
<span class="n">system</span><span class="o">.</span><span class="n">convert_storage</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">)</span>

<span class="c1"># Verify new storage type</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New storage type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">system</span><span class="o">.</span><span class="n">_time_series_mgr</span><span class="o">.</span><span class="n">_storage</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: New storage type: ArrowTimeSeriesStorage</span>

<span class="c1"># Verify time series data is still accessible</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get_time_series</span><span class="p">(</span><span class="n">generator</span><span class="p">,</span> <span class="n">variable_name</span><span class="o">=</span><span class="s2">&quot;active_power&quot;</span><span class="p">,</span> <span class="n">scenario</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Time series data preserved: </span><span class="si">{</span><span class="n">ts</span><span class="o">.</span><span class="n">data_array</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="c1"># Output: Time series data preserved: [0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23]</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Converting between storage types preserves all time series data. This can be useful when you need to optimize performance by switching storage strategies during different phases of your application.</p>
</div>
</section>
<section id="choosing-the-right-backend-for-your-use-case">
<h2>Choosing the Right Backend for Your Use Case<a class="headerlink" href="#choosing-the-right-backend-for-your-use-case" title="Link to this heading">¶</a></h2>
<p>Each storage backend has different characteristics that make it suitable for different use cases:</p>
<section id="in-memory-storage">
<h3>In-Memory Storage<a class="headerlink" href="#in-memory-storage" title="Link to this heading">¶</a></h3>
<p><strong>Best for:</strong></p>
<ul class="simple">
<li><p>Small datasets</p></li>
<li><p>Quick prototyping and testing</p></li>
<li><p>Temporary data that doesn’t need to persist</p></li>
</ul>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Fastest access time</p></li>
<li><p>Data is lost when the program exits</p></li>
<li><p>Limited by available RAM</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="arrow-storage">
<h3>Arrow Storage<a class="headerlink" href="#arrow-storage" title="Link to this heading">¶</a></h3>
<p><strong>Best for:</strong></p>
<ul class="simple">
<li><p>Datasets of any size</p></li>
<li><p>Persistence across program runs</p></li>
<li><p>Efficient file-based storage and retrieval</p></li>
<li><p>Creates one file per time series array.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This can be problematic on HPC shared filesystems if the number of arrays is is greater than 10,000.</p>
</div>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Fast file-based storage using Apache Arrow format</p></li>
<li><p>Good balance of speed and persistence</p></li>
<li><p>Default storage backend</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="chronify-storage">
<h3>Chronify Storage<a class="headerlink" href="#chronify-storage" title="Link to this heading">¶</a></h3>
<p><strong>Best for:</strong></p>
<ul class="simple">
<li><p>Complex time series data with relationships</p></li>
<li><p>When SQL queries are needed</p></li>
<li><p>Integration with database systems</p></li>
</ul>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Uses a SQL database via the Chronify library</p></li>
<li><p>Supports transactional operations</p></li>
<li><p>More powerful query capabilities</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">CHRONIFY</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="hdf5-storage">
<h3>HDF5 Storage<a class="headerlink" href="#hdf5-storage" title="Link to this heading">¶</a></h3>
<p><strong>Best for:</strong></p>
<ul class="simple">
<li><p>Scientific datasets with three or more dimensions</p></li>
<li><p>Data that benefits from HDF5’s compression capabilities</p></li>
<li><p>Systems with tens or hundreds of thousands of time series arrays</p></li>
<li><p>Stores all time series arrays in one file.</p></li>
</ul>
<p><strong>Characteristics:</strong></p>
<ul class="simple">
<li><p>Uses HDF5 file format, popular in scientific computing</p></li>
<li><p>Supports hierarchical organization of data</p></li>
<li><p>Good compression capabilities</p></li>
<li><p>Compatible with <a class="reference external" href="https://github.com/NREL-Sienna/PowerSystems.jl">PowerSystems.jl</a></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">HDF5</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>HDF5 storage is currently available in the development version only.</p>
</div>
</section>
</section>
<section id="working-with-time-series-data">
<h2>Working with Time Series Data<a class="headerlink" href="#working-with-time-series-data" title="Link to this heading">¶</a></h2>
<p>Regardless of the backend you choose, the API for adding, retrieving, and using time series data remains the same:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys.time_series_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">SingleTimeSeries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tests.models.simple_system</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleSystem</span><span class="p">,</span> <span class="n">SimpleGenerator</span><span class="p">,</span> <span class="n">SimpleBus</span>

<span class="c1"># Create a system with your chosen backend</span>
<span class="n">system</span> <span class="o">=</span> <span class="n">SimpleSystem</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">)</span>

<span class="c1"># Add components</span>
<span class="n">bus</span> <span class="o">=</span> <span class="n">SimpleBus</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test-bus&quot;</span><span class="p">,</span> <span class="n">voltage</span><span class="o">=</span><span class="mf">1.1</span><span class="p">)</span>
<span class="n">generator</span> <span class="o">=</span> <span class="n">SimpleGenerator</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;gen&quot;</span><span class="p">,</span> <span class="n">active_power</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">rating</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">bus</span><span class="o">=</span><span class="n">bus</span><span class="p">,</span> <span class="n">available</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">add_components</span><span class="p">(</span><span class="n">bus</span><span class="p">,</span> <span class="n">generator</span><span class="p">)</span>

<span class="c1"># Create and add time series data</span>
<span class="n">length</span> <span class="o">=</span> <span class="mi">24</span>
<span class="n">initial_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2020</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">resolution</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>

<span class="c1"># Create a time series</span>
<span class="n">time_series</span> <span class="o">=</span> <span class="n">SingleTimeSeries</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;active_power&quot;</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">,</span>
    <span class="n">initial_timestamp</span><span class="o">=</span><span class="n">initial_time</span>
<span class="p">)</span>

<span class="c1"># Add the time series to a component</span>
<span class="n">system</span><span class="o">.</span><span class="n">add_time_series</span><span class="p">(</span><span class="n">time_series</span><span class="p">,</span> <span class="n">generator</span><span class="p">,</span> <span class="n">scenario</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span><span class="p">)</span>

<span class="c1"># Retrieve the time series later</span>
<span class="n">retrieved_ts</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get_time_series</span><span class="p">(</span>
    <span class="n">generator</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;active_power&quot;</span><span class="p">,</span>
    <span class="n">scenario</span><span class="o">=</span><span class="s2">&quot;baseline&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="read-only-mode">
<h2>Read-Only Mode<a class="headerlink" href="#read-only-mode" title="Link to this heading">¶</a></h2>
<p>For any storage backend, you can set it to read-only mode, which is useful when
you’re working with existing data that won’t or shouldn’t be modified. For
example, suppose you want to load a system with GBs of time series data. By
default, infrasys will make a copy of the time series data during
de-serialization. If you set <code class="docutils literal notranslate"><span class="pre">time_series_read_only=True</span></code>, infrasys will skip
that copy operation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_read_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In read-only mode, attempts to add or modify time series data will raise exceptions.</p>
</div>
</section>
<section id="serializing-and-deserializing-a-system">
<h2>Serializing and Deserializing a System<a class="headerlink" href="#serializing-and-deserializing-a-system" title="Link to this heading">¶</a></h2>
<p>When saving a system to disk, all the time series data will be properly serialized regardless of the backend used:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># Save the entire system (including time series data)</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;my_system_data&quot;</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

<span class="c1"># To load the system back</span>
<span class="n">loaded_system</span> <span class="o">=</span> <span class="n">SimpleSystem</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The storage backend information is preserved when saving and loading a system.</p>
</div>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Link to this heading">¶</a></h2>
<p>Each storage backend offers different trade-offs in terms of performance:</p>
<ul class="simple">
<li><p><strong>Memory Usage</strong>: In-memory storage keeps all data in RAM, which can be a limitation for large datasets</p></li>
<li><p><strong>Disk Space</strong>: Arrow, Chronify, and HDF5 storage use disk space, with different compression characteristics</p></li>
<li><p><strong>Access Speed</strong>: In-memory is fastest, followed by Arrow/HDF5, then Chronify (depending on the specific operation)</p></li>
<li><p><strong>Query Flexibility</strong>: Chronify offers the most complex query capabilities through SQL</p></li>
<li><p><strong>Serialization/Deserialization Speed</strong>: Arrow typically offers the fastest serialization for time series data</p></li>
</ul>
<section id="relative-performance-comparison">
<h3>Relative Performance Comparison<a class="headerlink" href="#relative-performance-comparison" title="Link to this heading">¶</a></h3>
<p>The table below gives a general comparison of the different storage backends (scale of 1-5, where 5 is best):</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Storage Type</p></th>
<th class="head"><p>Read Speed</p></th>
<th class="head"><p>Write Speed</p></th>
<th class="head"><p>Memory Usage</p></th>
<th class="head"><p>Disk Usage</p></th>
<th class="head"><p>Query Capabilities</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>In-Memory</p></td>
<td><p>5</p></td>
<td><p>5</p></td>
<td><p>1</p></td>
<td><p>N/A</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p>Arrow</p></td>
<td><p>4</p></td>
<td><p>4</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>Chronify</p></td>
<td><p>2</p></td>
<td><p>3</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>HDF5</p></td>
<td><p>3</p></td>
<td><p>3</p></td>
<td><p>4</p></td>
<td><p>4</p></td>
<td><p>3</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above table is a generalization. Actual performance will depend on your specific dataset characteristics, hardware, and operations being performed.</p>
</div>
</section>
<section id="benchmarking-your-use-case">
<h3>Benchmarking Your Use Case<a class="headerlink" href="#benchmarking-your-use-case" title="Link to this heading">¶</a></h3>
<p>For critical applications, it’s recommended to benchmark different storage backends with your specific data patterns:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys.time_series_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimeSeriesStorageType</span><span class="p">,</span> <span class="n">SingleTimeSeries</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">infrasys</span><span class="w"> </span><span class="kn">import</span> <span class="n">System</span>

<span class="c1"># Function to benchmark storage operations</span>
<span class="k">def</span><span class="w"> </span><span class="nf">benchmark_storage</span><span class="p">(</span><span class="n">storage_type</span><span class="p">,</span> <span class="n">data_size</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
    <span class="c1"># Setup</span>
    <span class="n">system</span> <span class="o">=</span> <span class="n">System</span><span class="p">(</span><span class="n">time_series_storage_type</span><span class="o">=</span><span class="n">storage_type</span><span class="p">)</span>

    <span class="c1"># Generate test data</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">data_size</span><span class="p">)</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="n">SingleTimeSeries</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_variable&quot;</span><span class="p">,</span>
        <span class="n">resolution</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="n">initial_timestamp</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="c1"># Benchmark write</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">system</span><span class="o">.</span><span class="n">add_time_series</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">system</span><span class="p">)</span>
    <span class="n">write_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

    <span class="c1"># Benchmark read</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">retrieved_ts</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">get_time_series</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_variable&quot;</span><span class="p">)</span>
    <span class="n">read_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;write_time&quot;</span><span class="p">:</span> <span class="n">write_time</span><span class="p">,</span> <span class="s2">&quot;read_time&quot;</span><span class="p">:</span> <span class="n">read_time</span><span class="p">}</span>

<span class="c1"># Run benchmarks</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">storage_type</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">MEMORY</span><span class="p">,</span>
    <span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">ARROW</span><span class="p">,</span>
    <span class="n">TimeSeriesStorageType</span><span class="o">.</span><span class="n">CHRONIFY</span>
<span class="p">]:</span>
    <span class="n">results</span><span class="p">[</span><span class="n">storage_type</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">benchmark_storage</span><span class="p">(</span><span class="n">storage_type</span><span class="p">)</span>

<span class="c1"># Print results</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">times</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> - Write: </span><span class="si">{</span><span class="n">times</span><span class="p">[</span><span class="s1">&#39;write_time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">s, Read: </span><span class="si">{</span><span class="n">times</span><span class="p">[</span><span class="s1">&#39;read_time&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.6f</span><span class="si">}</span><span class="s2">s&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Choose the storage backend that best meets your specific requirements for memory usage, persistence, access patterns, and query complexity.</p>
</section>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>The Infrasys library provides multiple storage backends for time series data, each optimized for different use cases:</p>
<ol class="arabic simple">
<li><p><strong>In-Memory Storage</strong>: Fastest but limited by RAM and lacks persistence</p></li>
<li><p><strong>Arrow Storage</strong>: Good balance of speed and persistence, using Apache Arrow files</p></li>
<li><p><strong>Chronify Storage</strong>: SQL-based storage with powerful query capabilities and time mappings.</p></li>
<li><p><strong>HDF5 Storage</strong>: Hierarchical storage format compatible with <a class="reference external" href="https://github.com/NREL-Sienna/PowerSystems.jl">PowerSystems.jl</a></p></li>
</ol>
<p>All storage backends implement the same interface, making it easy to switch between them as your needs change. The choice of storage backend doesn’t affect how you interact with the time series data through the Infrasys API, but it can significantly impact performance and resource utilization.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, NREL
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How to Use Different Storage Backends for Time Series Data</a><ul>
<li><a class="reference internal" href="#available-storage-backends">Available Storage Backends</a></li>
<li><a class="reference internal" href="#choosing-a-storage-backend">Choosing a Storage Backend</a></li>
<li><a class="reference internal" href="#storage-directory-configuration">Storage Directory Configuration</a></li>
<li><a class="reference internal" href="#converting-between-storage-types">Converting Between Storage Types</a></li>
<li><a class="reference internal" href="#choosing-the-right-backend-for-your-use-case">Choosing the Right Backend for Your Use Case</a><ul>
<li><a class="reference internal" href="#in-memory-storage">In-Memory Storage</a></li>
<li><a class="reference internal" href="#arrow-storage">Arrow Storage</a></li>
<li><a class="reference internal" href="#chronify-storage">Chronify Storage</a></li>
<li><a class="reference internal" href="#hdf5-storage">HDF5 Storage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-time-series-data">Working with Time Series Data</a></li>
<li><a class="reference internal" href="#read-only-mode">Read-Only Mode</a></li>
<li><a class="reference internal" href="#serializing-and-deserializing-a-system">Serializing and Deserializing a System</a></li>
<li><a class="reference internal" href="#performance-considerations">Performance Considerations</a><ul>
<li><a class="reference internal" href="#relative-performance-comparison">Relative Performance Comparison</a></li>
<li><a class="reference internal" href="#benchmarking-your-use-case">Benchmarking Your Use Case</a></li>
</ul>
</li>
<li><a class="reference internal" href="#summary">Summary</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=38b66d78"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=3a0c56fd"></script>
    </body>
</html>